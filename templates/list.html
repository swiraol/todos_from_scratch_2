{% extends 'layout.html' %}

{% block content %}
  <a href="{{ url_for('all_lists') }}" class="all-lists"><h2>All Lists</h2></a>
  {{ lst.title }}
  <div class="{{ 'list-is-all-done' if all_completed else '' }}">
    <form action="{{ url_for('complete_all', list_id=lst['id']) }}" method="post">
      <button class="{{ 'hidden' if all_completed else '' }}" type="submit" name="complete_all" value="true">Complete All</button>
      <a href="{{ url_for('edit_list', list_id=lst.id) }}">Edit List</a>
    </form>
    <ul>
      {% for todo in lst.todos %}
        <li class="{{ 'completed' if todo.completed else '' }}">{{ todo.title }}</li>
        <form action="{{ url_for('update_todo', list_id=lst['id'], todo_id=todo['id']) }}" method="post">
          <button type="submit" name="completed" value="{{ not todo.completed }}">Mark as complete</button>
        </form>
      {% endfor %}
    </ul>
  </div>

  <p>Enter a new todo item:</p>
  <form action="{{ url_for('create_todo', list_id=lst['id']) }}" method="post">
    <input placeholder="Something to do" type="text" name="todo_title" value="{{ title }}">
    <input type="submit" value="Add">
  </form>
{% endblock %}